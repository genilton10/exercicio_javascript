<!DOCTYPE html>
<html lang="en">
<head>
  <meta charset="UTF-8">
  <meta name="viewport" content="width=device-width, initial-scale=1.0">
  <meta http-equiv="X-UA-Compatible" content="ie=edge">
  <title>Lista de Tarefas</title>
</head>
<body>
  <div id="app">
    <ul>
      
    </ul>
    <input type="text" placeholder="Tarefa">
    <button>Criar Tarefa</button>

  </div>

  <script>
    const tarefas = JSON.parse(localStorage.getItem('lista_tarefas'))  || [];
    const botao = document.querySelector('button');
    const lista = document.querySelector('ul');

    /*
    function mostraTarefas(){

      const texto = tarefas.map(document.createTextNode(tarefa));
      document.getElementById("app").innerHTML = texto;;
      const item = tarefas.map(document.createElement('li'));
      document.getElementById().innerHTML = item;;
      item.appendChild(texto);
      const lista = document.querySelector('ul');
      lista.appendChild(item);
      const posicao = tarefas.indexOf(tarefa);
      const link = document.createElement('a');
      link.setAttribute('href', '#');
      link.setAttribute('onclick', 'removerTarefa('+posicao+')');
      const textoLink = document.createTextNode('  Excluir');
      link.appendChild(textoLink);
      item.appendChild(link);
    }
    

    */
    function mostraTarefas(){
      
      for(tarefa of tarefas){
       const texto = document.createTextNode(tarefa);
       const item = document.createElement('li');
       item.appendChild(texto);
       const lista = document.querySelector('ul');
       lista.appendChild(item);
       const posicao = tarefas.indexOf(tarefa);
       const link = document.createElement('a');
       link.setAttribute('href', '#');
       link.setAttribute('onclick', 'removerTarefa('+posicao+')');
       const textoLink = document.createTextNode('  Excluir');
       link.appendChild(textoLink);
       item.appendChild(link);

    }
  }

  mostraTarefas();
  
  function adicionaTarefa(){
    lista.innerHTML ="";
    var textoInput = document.querySelector('input');
    tarefas.push(textoInput.value);
    mostraTarefas();
    salvarStorage();
  }

  botao.onclick = adicionaTarefa;

  function removerTarefa(posicao){
    lista.innerHTML ="";
    tarefas.splice(posicao, 1);
    mostraTarefas();
    salvarStorage();
  }

  function salvarStorage(){localStorage.setItem('lista_tarefas', JSON.stringify(tarefas));
  }

  </script>

</body>
</html>